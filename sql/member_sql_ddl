/* 회원 */
CREATE TABLE MEMBER (
	MEMBER_ID VARCHAR2(20) NOT NULL, 
	MEMBER_PW VARCHAR2(16) NOT NULL, 
	MEMBER_NAME VARCHAR2(20) NOT NULL, 
	MEMBER_PHONE VARCHAR2(11) NOT NULL, 
	MEMBER_ADDRESS VARCHAR2(255) NOT NULL,
	MEMBER_EMAIL VARCHAR2(30) NOT NULL, 
	NOTIFICATION VARCHAR2(5) NOT NULL,
	MEMBER_PUBLICKEY VARCHAR2(255) NOT NULL,
	LINE_ID VARCHAR2(40) NOT NULL
);

COMMENT ON TABLE MEMBER IS '회원(일반) 테이블';

COMMENT ON COLUMN MEMBER.MEMBER_ID IS '5~20자의 아이디 영문 소문자, 숫자 조합';

COMMENT ON COLUMN MEMBER.MEMBER_PW IS '6~16자 영문 대 소문자, 숫자, 특수문자 조합';

COMMENT ON COLUMN MEMBER.MEMBER_NAME IS '한국어, 영어 고려한 이름';

COMMENT ON COLUMN MEMBER.MEMBER_PHONE IS '회원의 연락처(휴대폰) 하이픈(''-'') 을 뺀 숫자';

COMMENT ON COLUMN MEMBER.MEMBER_ADDRESS IS '회원의 주소( ex : ㅇㅇ시 ㅇㅇ구 ㅇㅇ 동,읍,면 ) ';

COMMENT ON COLUMN MEMBER.MEMBER_EMAIL IS '회원의 이메일 ( ''@'' , ''.'' 포함)';

COMMENT ON COLUMN MEMBER.NOTIFICATION IS '알림기능 On, Off (default ON)';

COMMENT ON COLUMN MEMBER.MEMBER_PUBLICKEY IS '회원의 정보(비밀번호)를 암호화하기위한 키';

COMMENT ON COLUMN MEMBER.LINE_ID IS '라인 아이디 KEY값';

ALTER TABLE MEMBER
	ADD
		CONSTRAINT PK_MEMBER
		PRIMARY KEY (
			MEMBER_ID
		);

/* 앞단어 */
CREATE TABLE FORWARD_WORD (
	FORWARD_WORD_NUM NUMBER NOT NULL,
	FORWARD_WORD_WORD VARCHAR2(10) NOT NULL
);

COMMENT ON TABLE FORWARD_WORD IS 'otp 단어 맵핑하는 앞단어';

COMMENT ON COLUMN FORWARD_WORD.FORWARD_WORD_NUM IS 'OTP 숫자와 맵핑되는 앞단어번호';

COMMENT ON COLUMN FORWARD_WORD.FORWARD_WORD_WORD IS 'OTP 숫자와 맵핑되는 단어';

ALTER TABLE FORWARD_WORD
	ADD
		CONSTRAINT PK_FORWARD_WORD
		PRIMARY KEY (
			FORWARD_WORD_NUM
		);

/* 뒷단어 */
CREATE TABLE BACK_WORD (
	BACK_WORD_NUM NUMBER NOT NULL, 
	BACK_WORD_WORD VARCHAR2(10) NOT NULL
);

COMMENT ON TABLE BACK_WORD IS 'otp키와 맵핑하는 뒷단어';

COMMENT ON COLUMN BACK_WORD.BACK_WORD_NUM IS 'OTP 숫자와 맵핑되는 뒷단어 번호';

COMMENT ON COLUMN BACK_WORD.BACK_WORD_WORD IS 'OTP 숫자와 맵핑되는 단어';

ALTER TABLE BACK_WORD
	ADD
		CONSTRAINT PK_BACK_WORD
		PRIMARY KEY (
			BACK_WORD_NUM
		);

/* 도어락 */
CREATE TABLE DOORLOCK (
	DOORLOCK_NUM VARCHAR2(255) NOT NULL, 
	MEMBER_ID VARCHAR2(20) NOT NULL
);

COMMENT ON TABLE DOORLOCK IS '도어락 테이블';

COMMENT ON COLUMN DOORLOCK.DOORLOCK_NUM IS '설치 위치 동/읍/면 을 아스키 코드값을 변환한값 + 인덱스번호부여';

COMMENT ON COLUMN DOORLOCK.MEMBER_ID IS '회원 아이디 (FK) 5~20자의 영문 소문자,숫자 ';

ALTER TABLE DOORLOCK
	ADD
		CONSTRAINT PK_DOORLOCK
		PRIMARY KEY (
			DOORLOCK_NUM
		);


/* 관리자 */
CREATE TABLE ADMIN (
	ADMIN_ID VARCHAR2(30) NOT NULL, 
	ADMIN_PW VARCHAR2(30)
);

COMMENT ON TABLE ADMIN IS '관리자 테이블';

COMMENT ON COLUMN ADMIN.ADMIN_ID IS '아이디';

COMMENT ON COLUMN ADMIN.ADMIN_PW IS '비밀번호';

ALTER TABLE ADMIN
	ADD
		CONSTRAINT PK_ADMIN
		PRIMARY KEY (
			ADMIN_ID
		);

/* 라인 */
CREATE TABLE LINE (
	DOORLOCK_NUM VARCHAR2(255) NOT NULL,
	GROUP_ID VARCHAR2(255) NOT NULL,
	LINE_ID VARCHAR2(40) NOT NULL
);

COMMENT ON TABLE LINE IS '시리얼번호, 그룹아이디, 유저아이디 컬럼 ';

COMMENT ON COLUMN LINE.DOORLOCK_NUM IS '설치 위치 동/읍/면 을 아스키 코드값을 변환한값 + 구분자+인덱스번호부여';

COMMENT ON COLUMN LINE.GROUP_ID IS '(라인으로 로그인할경우 라인에서 받아온 GROUP ID KEY OR 라인아이디가 없으면 X)';

COMMENT ON COLUMN LINE.LINE_ID IS '(라인으로 로그인할경우 라인에서 받아온 ID KEY OR 라인아이디가 없으면 X) ';

ALTER TABLE LINE
	ADD
		CONSTRAINT PK_LINE
		PRIMARY KEY (
			DOORLOCK_NUM
		);

/* 로그 */
CREATE TABLE LOG (
	DOORLOCK_NUM_INDEX VARCHAR2(255) NOT NULL,
	MEMBER_ID VARCHAR2(20) NOT NULL,
	LOG_DATE VARCHAR2(18) NOT NULL,
	LOG_CONTROL VARCHAR2(10) NOT NULL,
	DOORLOCK_NUM VARCHAR2(255) NOT NULL
);

COMMENT ON TABLE LOG IS '출입제어에 대한 로그정보';

COMMENT ON COLUMN LOG.DOORLOCK_NUM_INDEX IS '도어락번호 +'' _ ''+ 인덱스 번호 ';

COMMENT ON COLUMN LOG.MEMBER_ID IS '5~20자의 영문 소문자,숫자 (라인으로 로그인할경우 라인에서 받아온 ID KEY)';

COMMENT ON COLUMN LOG.LOG_DATE IS '로그 ( 제어한 날짜 시간 ) 형식 YYYY.MM.DD hh24:mi:ss';

COMMENT ON COLUMN LOG.LOG_CONTROL IS '로그에 제어 (문열림) 을 남기기위한 컬럼 ( True, False )';

COMMENT ON COLUMN LOG.DOORLOCK_NUM IS '설치 위치 동/읍/면 을 아스키 코드값을 변환한값 + 인덱스번호부여';

ALTER TABLE LOG
	ADD
		CONSTRAINT PK_LOG
		PRIMARY KEY (
			DOORLOCK_NUM_INDEX
		);